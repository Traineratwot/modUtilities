## modUtilities
 это компонент добавляющий разные полезные, часто используемые, и просто интересные функции, для облегчения и стандартизации програмирования на modx
 поддерживает fenom
 
   ```fenom
  //fenom
   тег    метод    аргументы...
  {util 'makeUrl' 24}
   тег    переменная
  {util 'constant->kb'} 
  ```

чтобы работали подсказки в IDE вы можете добавить этот фрагмент в класс 'modX'
это точно никак не навредит вашему проекту
```
/**
 * @var utilities utilities package.
 */
public $util;
```

  
#### Константы и переменные
 ```php
$modx->util->constant->kb       //килобайт  в байтах
$modx->util->constant->mb       //мегобайт  в байтах    
$modx->util->constant->gb       //гигобайт  в байтах
$modx->util->constant->tb       //теробайт  в байтах
$modx->util->constant->min      //минут     в секундах
$modx->util->constant->hour     //час       в секундах
$modx->util->constant->day      //день      в секундах
$modx->util->constant->week     //неделя    в секундах
$modx->util->output['function']   //сюда попадает побочный вывод некоторых функций 
 ```
#### Плагины
- **modUtilities** - основной плагин расширяющий объекты класса modX и FenomX
    ##### _срабатывает на события `OnMODXInit`,`pdoToolsOnFenomInit`_
- **modUtilitiesPathGen** - автоматически генерирует пути для статичных ресурсов: чанков снипетов шаблонов и плагинов
    срабатывает при включении чекбокса `Статичный` и пустом поле `Статичный файл`
    ##### _срабатывает на события `OnChunkFormPrerender`,`OnDocFormPrerender`,`OnPluginFormPrerender`,`OnSnipFormPrerender`,`OnTempFormPrerender`_

#### Функции

- **print_n** - возвращает информацию переданную через аргументы с переносом строки
    ##### _что-то среднее между echo и var_dump_
    ```php
    $arr = [
        'фрукт'=>'апельсин',
        'ягода'=>'арбуз',
        ];
    echo $modx->util->print_n('у меня есть',$arr,8);
    //(string): у меня есть, (array): {"фрукт":"апельсин","ягода":"арбуз"}, (integer): 8
    ```

- **mb_ucfirst** - возвращает и строку с заглавной буквы для любой кодировки
    ##### _функция простая но объявлять ее в каждом снипете не хочется_
    ```php
    $modx->util->mb_ucfirst('у меня есть'); //У меня есть
    ```
- **translit** - транслитерирует секст с помощью установленного у вас транслитератора alias например `yTranslit`
    если такого нет то просто транслитерирует текст как для url
    ##### _~~моя любимая функция~~_
    ```php
    //с установленным "yTranslit"
    $modx->util->translit('у меня есть'); //i-have
    $modx->util->cpuTranslit('у меня есть'); //u-menya-est
    $modx->util->basicTranslit('у меня есть'); //u menya est
    ```

- **console** - возвращает переданную во втором параметр инфомацию в вид js скрипта console.{действи}
    ##### _полезно при работе на рабочем сайте для вывда debug информации_
    
    ```php
    $arr = [
        'фрукт'=>'апельсин',
        'ягода'=>'арбуз',
        ];
    echo $modx->util->console('log','у меня есть'); 
    //<script>console.log('(string): у меня есть');</script>
    echo $modx->util->console('debug',$arr); 
    //<script>console.debug({"фрукт":"апельсин","ягода":"арбуз"});</script>
    echo $modx->util->console('table',$arr); 
    //<script>console.table({"фрукт":"апельсин","ягода":"арбуз"});</script>
    ```

- **dateFormat** - меняет формат даты
    ##### _полезно если приходится проделывать это много раз_
    ```php
    $modx->util->dateFormat('d.m.Y','29.01.2020','Y-m-d');//2020-01-29
    ```

- **rawText** - оставляет в строке только буквы и цифры
    ##### _полезно когда нужно сравнить две строки с не большими отличиями_
    ```php
    $modx->util->rawText('Abs_#)/\(_De');//absde
    ```
- **likeString** - сравнивает две строки либо массив строк со строкой
    и выводит самую похожую строку и процент похожести
    ```php
    $arr = [
        'Пивет',
        'Прлвeт',
        'Приет',
        'тивирТ',
        'привт',
        'досвидания',
    ];
    var_dump($modx->util->likeString($arr,'Привет'));
    // array (size=3)
    //   'one' => string 'Приет' (length=10)
    //   'two' => string 'Привет' (length=12)
    //   'score' => float 90,909090909091
    
    $modx->util->data['likeString']; //здесь будет массив с остальными словами и их процентом схожести
    ```

- **makeUrl** - делает тоже что и обычный makeUrl только умнее: ссылка всегда начинается с '/', если страница равна ссылке подставляется параметр alt по умолчанию '#top' 
    ```php
    //php
    $modx->util->makeUrl(1,'#top');
    ```
    ```fenom
    //fenom
    {util 'makeUrl' 24}
    ```

- **makeUrl** - выдает первый не пустой аргумент
    ##### _я использовал это вместе с fenom что бы не писать кучу условий_
    
    ```php
    //php
    $modx->util->or(0,false, null,'',' ', 'привет','кит'); //привет
    ```
    ```fenom
    //fenom
    {util 'or' 0 false null '' ' '  'привет' 'кит'}//привет
    ```


- **member** - функция для получения информации о группе пользователя

    *первый аргумент* - id пользователя если пустой то текущий авторезированный пользоваеть если авторизован

    *второй аргумент* - имя группы если установленно то, функция выдаст массив с ролью пользователя в этой группе или `false` если его в ней нет
    если yt установленно то, функция выдаст массив групп в которых состоит пользователь и его роль в них или `false`

    *третий аргумент* - можно заполнятьтолько вместе со вторым,
    функция выдаст `true` или `false`
 
    ```php
    //php
   $answer = $modx->util->member(1); 
   $answer = [
                {"groupId":"1","groupName":"Administrator","roleId":"2",    "roleName":"Super User"}
              ]
   $answer = $modx->util->member(1,'Administrator'); 
   $answer = {"roleId":"2","roleName":"Super User"}
   $answer = $modx->util->member(1,1,'Super User'); 
   $answer = true
    ```

